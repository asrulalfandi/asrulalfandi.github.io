<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asrul</title>
  <meta name="description" content="Portofolio Asrul">
  
  <!-- Favicon -->
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- CSS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/home.css">
  
</head>
<body>
    <!-- loading -->
    <div id="loader-wrapper">
  <div id="load">
    <div>G</div>
    <div>N</div>
    <div>I</div>
    <div>D</div>
    <div>A</div>
    <div>O</div>
    <div>L</div>
  </div>
</div>
  <!-- Navigation -->
  <nav class="main-nav">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <i class="fas fa-code"></i>
        <span>Asrul</span>
      </a>
      <div class="nav-links">
        <a href="index.html" class="nav-link active">Home</a>
        <a href="projects.html" class="nav-link">Project</a>
        <a href="contacts.html" class="nav-link">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero section">
    <div class="container">
      <div class="hero-content" data-aos="fade-up">
        <h1 id="typing-text" class="hero-title"></h1>
        <p class="hero-subtitle">
          Seorang pelajar yang gemar mengeksplorasi teknologi, desain, dan pengembangan bot.
        </p>
        <div class="hero-badges">
          <span class="badge"><i class="fas fa-lightbulb"></i> Tech Enthusiast</span>
          <span class="badge"><i class="fas fa-paint-brush"></i> UI Designer</span>
          <span class="badge"><i class="fas fa-robot"></i> Bot Developer</span>
          <span class="badge"><i class="fas fa-user-graduate"></i> Pelajar</span>
        </div>
        <div class="hero-buttons">
          <a href="#projects" class="btn btn-primary">
            <i class="fas fa-eye"></i> View Projects
          </a>
          <a href="contacts.html" class="btn btn-outline">
            <i class="fas fa-paper-plane"></i> Contact Me
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="about section">
    <div class="container">
      <h2 class="section-title" data-aos="fade-up">About <span class="text-gradient">Me</span></h2>
    <div class="about-content" data-aos="fade-up">
        <div class="about-text">
          <p>
            Halo! Saya <strong style="color: white">Asrul</strong>, tapi di internet saya lebih dikenal dengan nama <strong style="color: white">Asrul Ban Dalam</strong>. Saya lahir pada 21 Februari 2009 di Jakarta, dan saat ini saya adalah siswa kelas X-I di SMAN 1 Tarumajaya.    
          </p>  
          <p>
              Sejak kelas 6 sd saya sudah belajar membuat bot whatsapp yang menggunakan bahasa pemrograman seperti javascript, json, dll.
          </p>    
          <p>
              Saat saya smp saya mulai membuat website-website seperti website playlist untuk saya mendengar lagu tanpa iklan dan website tim game saya.
          </p>
          <p>
              Meskipun sudah cukup menguasai beberapa bahasa pemrograman, saya tetap memegang prinsip:<h1>"Tetap lapar akan ilmu."</h1>Dunia teknologi terus berkembang, dan saya ingin terus bertumbuh bersama perubahan itu.
          </p>  
          <p>
              Melalui website ini, saya ingin mendokumentasikan proses belajar saya, membagikan pengalaman, dan menginspirasi pelajar lain untuk berani berkarya di dunia teknologi—baik hardware maupun software.
              
          </p>
      
        </div>
        <div class="about-image">
          <img src="assets/images/profile.jpg" alt="Dafid Profile">
        </div>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section id="skills" class="section">
    <div class="container">
      <h2 class="section-title" data-aos="fade-up">My <span class="text-gradient">Skills</span></h2>
      <div class="skills-container" data-aos="fade-up">
        <div class="skill-card card">
          <i class="fab fa-html5"></i>
          <h3>Frontend Development</h3>
          <p>
            Menguasai HTML, CSS, JavaScript dasar dan beberapa framework frontend.
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 85%"></span></div>
          </div>
        </div>
        
        <div class="skill-card card">
          <i class="fas fa-robot"></i>
          <h3>Bot Development</h3>
          <p>
            Mengembangkan bot Telegram untuk berbagai keperluan menggunakan Python dan Node.js.
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 70%"></span></div>
          </div>
        </div>
        <div class="skill-card card">
          <i class="fas fa-code"></i>
          <h3>Menciptakan script/tools</h3>
          <p>
            Mengembangkan Script/tools yang berguna untuk kehidupan menggunakan python
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 70%"></span></div>
          </div>
        </div>
        <div class="skill-card card">
          <i class="fa fa-cogs" aria-hidden="true"></i>
          <h3>ROBOTIK</h3>
          <p>
            Mempelajari tentang microcontroller,sensor,dan module yang berguna di robotik
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 65%"></span></div>
          </div>
        </div>
        <div class="skill-card card">
          <i class="fas fa-mobile-alt"></i>
          <h3>Mobile APPS</h3>
          <p>
            Pengembangan aplikasi ppob untuk topup game,wallet,serta bayar tagihan listrik menggunakan bukaolshop berbasis html dan terintegrasi oleh mitra
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 60%"></span></div>
          </div>
        </div>
        <div class="skill-card card">
          <i class="fas fa-server"></i>
          <h3>Backend Basics</h3>
          <p>
            Pemahaman dasar tentang Node.js, Express, dan database seperti Firebase
          </p>
          <div class="skill-meter">
            <div class="meter"><span style="width: 55%"></span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects Preview -->
  <section id="projects" class="section">
    <div class="container">
      <h2 class="section-title" data-aos="fade-up">Featured <span class="text-gradient">Projects</span></h2>
      <div class="projects-preview">
        <div class="card" data-aos="fade-up">
          <div class="project-item">
            <img src="assets/images/project1.jpg" alt="Project 1">
            <div class="project-overlay">
              <h3>Portofolio Website</h3>
              <p>Portofolio buatan asrul dan 2 orang teman nya</p>
            </div>
          </div>
          <div class="project-item">
            <img src="assets/images/project2.jpg" alt="Project 2">
            <div class="project-overlay">
              <h3>Playlist Music Website</h3>
              <p>Website music playlist buatan asrul</p>
            </div>
          </div>
          <div class="project-item">
            <img src="assets/images/project3.jpg" alt="Project 3">
            <div class="project-overlay">
              <h3>UI Kit Design</h3>
              <p>Kumpulan komponen UI untuk proyek digital</p>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center" style="margin-top: 3rem;" data-aos="fade-up">
        <a href="projects.html" class="btn btn-primary">
          <i class="fas fa-folder-open"></i> View All Projects
        </a>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="contact section">
    <div class="container">
      <h2 class="section-title" data-aos="fade-up">komen<span class="text-gradient">tar</span></h2>
    
     <form class="contact-form" id="commentForm">
         
  <div class="form-group">
    <input type="text" id="name" placeholder="Your Name" required>
  </div>
  <div class="form-group">
    <textarea rows="5" id="message" placeholder="Your Message" required></textarea>
  </div>
  <button type="submit" class="btn btn-primary">
    <i class="fas fa-paper-plane"></i> Send Message
  </button>
</form>

<div id="comments"></div><!-- Tempat komentar ditampilkan -->


      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="social-links">
          
        </div>
        <div id="visitor-counter">
          <i class="fas fa-eye"></i> Visitors: <span id="visitor-count">0</span>
        </div>
        <p class="copyright">
          © 2025 Asrul Alfandi. All rights reserved.
        </p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Firebase SDK via compat (v9) -->
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
<script>
  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyByoMCNpjXoc_2cnl9B8-6C3hihQMU2x6U",
    authDomain: "realkomen-c43aa.firebaseapp.com",
    projectId: "realkomen-c43aa",
  };

  // Inisialisasi Firebase
  firebase.initializeApp(firebaseConfig);

  // Inisialisasi Firestore
  const db = firebase.firestore(); // ← ini benar untuk compat

  // Seleksi elemen form dan komentar
  const form = document.querySelector(".contact-form");
  const nameInput = form.querySelector('input[type="text"]');
  const messageInput = form.querySelector("textarea");
  const commentsDiv = document.getElementById("comments");

  // Event submit
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const name = nameInput.value.trim();
    const message = messageInput.value.trim();

    if (!name || !message) return;

    await db.collection("comments").add({
      name,
      message,
      timestamp: new Date(),
    });

    form.reset();
  });

  // Ambil dan tampilkan komentar
  db.collection("comments")
    .orderBy("timestamp", "desc")
    .onSnapshot((snapshot) => {
      commentsDiv.innerHTML = "";
      snapshot.forEach((doc) => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `<strong>${data.name}</strong><p>${data.message}</p>`;
        commentsDiv.appendChild(div);
        div.innerHTML = `
  <div class="comment-avatar">
    <i class="fas fa-user"></i>
  </div>
  <div class="comment-content">
    <strong>${data.name}</strong>
    <p>${data.message}</p>
  </div>
`;
      });
    });
</script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="js/main.js"></script>
  <script>
    // Mengecek jika ini adalah kunjungan pertama kali atau refresh halaman
    window.addEventListener("load", function() {
      if (!sessionStorage.getItem("loaded")) {
        // Menyimpan status bahwa halaman telah dimuat
        sessionStorage.setItem("loaded", "true");

        // Animasi loading
        const loader = document.getElementById("loader-wrapper");
        if (loader) {
          loader.style.opacity = '100';
          loader.style.transition = 'opacity 10s ease';
          setTimeout(() => loader.style.display = 'none', 2500); // Menyembunyikan loader setelah animasi
        }
      } else {
        // Jika halaman sudah dimuat sebelumnya, sembunyikan loader langsung
        const loader = document.getElementById("loader-wrapper");
        if (loader) {
          loader.style.display = 'none';
        }
      }
    });
  </script>
    <style>
    /* Chatbot Toggle Button */
    #chatbot-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 60px;
      background: #00dfc4;
      border-radius: 50%;
      box-shadow: 0 4px 12px rgba(0, 223, 196, 0.6);
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: background 0.3s ease;
    }
    #chatbot-toggle:hover {
      background: #00b39c;
    }
    #chatbot-toggle i {
      font-size: 40px;
      fill: #0a1a2f;
      color: black;
    }

    /* Chatbot Container */
    #chatbot-container {
      position: fixed;
      bottom: 90px;
      left: 20px;
      width: 320px;
      max-width: 90vw;
      background: #1e1e2f;
      border-radius: 14px;
      box-shadow: 0 8px 24px rgba(0, 223, 196, 0.4);
      display: none;
      flex-direction: column;
      font-family: 'Inter', sans-serif;
      color: #dbeafe;
      z-index: 9998;
      overflow: hidden;
    }

    #chatbot-header {
      padding: 14px 18px;
      background: #121224;
      border-top-left-radius: 14px;
      border-top-right-radius: 14px;
      font-weight: 700;
      font-size: 18px;
      color: #00dfc4;
      user-select: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #chatbot-close-btn {
      cursor: pointer;
      font-size: 20px;
      color: #00dfc4;
      background: transparent;
      border: none;
    }
    #chatbot-close-btn:hover {
      color: #00b39c;
    }

    #chatbot-output {
      flex-grow: 1;
      padding: 14px 18px;
      overflow-y: auto;
      max-height: 280px;
      background: #0a1a2f;
      font-size: 14px;
      line-height: 1.5;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .chat-message {
      display: flex;
      gap: 10px;
      max-width: 100%;
    }
    .chat-message.user {
      align-self: flex-end;
      flex-direction: row-reverse;
    }
    .chat-message.bot {
      align-self: flex-start;
    }

    .chat-avatar {
      flex-shrink: 0;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: #00dfc4;
      box-shadow: 0 0 8px rgba(0, 223, 196, 0.7);
    }

    .chat-text {
      background: #121224;
      padding: 10px 14px;
      border-radius: 12px;
      color: #dbeafe;
      box-shadow: 0 0 10px rgba(0, 223, 196, 0.3);
      word-wrap: break-word;
      max-width: 100%;
      overflow-wrap: break-word;
      word-break: break-word;
      box-sizing: border-box;
    }
    .chat-message.user .chat-text {
      background: #00dfc4;
      color: #0a1a2f;
      box-shadow: none;
    }

    /* Format Teks Khusus */
    .chat-text strong {
      font-weight: bold;
      color: #00dfc4;
    }
    .chat-text em {
      font-style: italic;
    }
    .chat-text a {
      color: #00dfc4;
      text-decoration: none;
    }
    .chat-text a:hover {
      text-decoration: underline;
    }
    .chat-text p {
      margin: 8px 0;
      word-break: break-word;
    }
    .chat-text ul, .chat-text ol {
      padding-left: 20px;
      margin: 8px 0;
      word-break: break-word;
    }
    .chat-text li {
      margin-bottom: 4px;
      word-break: break-word;
    }
    
    /* Format khusus untuk list bernomor */
    .numbered-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 10px 0;
    }
    .numbered-item {
      display: flex;
      gap: 8px;
    }
    .number {
      min-width: 20px;
      font-weight: bold;
      color: #00dfc4;
    }

    /* Kotak Kode dengan Tombol Salin */
    .code-container {
      position: relative;
      margin: 10px 0;
      border-radius: 8px;
      overflow: hidden;
      max-width: 100%;
    }
    
    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: #2d2d40;
      color: #dbeafe;
      font-size: 13px;
      font-family: 'Courier New', monospace;
    }
    
    .copy-btn {
      background: transparent;
      border: none;
      color: #00dfc4;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      transition: color 0.2s;
    }
    
    .copy-btn:hover {
      color: #00b39c;
    }
    
    pre {
      background: #0a1a2f;
      padding: 12px;
      margin: 0;
      overflow-x: auto;
      font-size: 13px;
      font-family: 'Courier New', monospace;
      border-radius: 0 0 8px 8px;
      max-height: 200px;
      overflow-y: auto;
      max-width: 100%;
      white-space: pre-wrap;
      word-wrap: break-word;
      word-break: break-all;
      box-sizing: border-box;
    }
    
    code {
      color: #dbeafe;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      word-break: break-all;
    }

    /* Input Area */
    #chatbot-input-area {
      display: flex;
      padding: 14px 18px;
      border-top: 1px solid rgba(0, 223, 196, 0.3);
      gap: 12px;
      background: #121224;
      border-bottom-left-radius: 14px;
      border-bottom-right-radius: 14px;
    }
    #chatbot-input {
      flex-grow: 1;
      padding: 12px 16px;
      background: #1e1e2f;
      border: none;
      border-radius: 12px;
      color: #dbeafe;
      font-size: 14px;
      outline: none;
      box-sizing: border-box;
    }
    #chatbot-input::placeholder {
      color: #64748b;
    }
    #chatbot-input:focus {
      border: 2px solid #00dfc4;
    }
    #chatbot-send-btn {
      background: #00dfc4;
      border: none;
      padding: 0 16px;
      border-radius: 12px;
      color: #0a1a2f;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.3s ease;
      font-size: 18px;
    }
    #chatbot-send-btn:hover {
      background: #00b39c;
    }

    /* Loading Animation */
    @keyframes typing {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }
    .typing-indicator {
      display: flex;
      gap: 4px;
      align-items: center;
    }
    .typing-dot {
      width: 8px;
      height: 8px;
      background: #00dfc4;
      border-radius: 50%;
      animation: typing 1.5s infinite ease-in-out;
    }
    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.3s; }
    .typing-dot:nth-child(3) { animation-delay: 0.6s; }
    
    /* Feedback saat menyalin kode */
    .copy-success {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #00dfc4;
      color: #0a1a2f;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 10000;
    }
    
    .copy-success.show {
      transform: translateY(0);
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- Feedback saat menyalin kode -->
  <div class="copy-success" id="copy-success">Kode berhasil disalin! <i class="fas fa-check"></i></div>
  
  <!-- Tombol Toggle Chatbot -->
  <div id="chatbot-toggle" role="button" aria-label="Buka chat AI" tabindex="0">
   <i class="fa fa-commenting"></i>
  </div>

  <!-- Container Chatbot -->
  <div id="chatbot-container" role="region" aria-live="polite" aria-label="Chatbot AI">
    <div id="chatbot-header">
      Chat AI Asrul.ai
      <button id="chatbot-close-btn" aria-label="Tutup chat AI">&times;</button>
    </div>
    <div id="chatbot-output" aria-live="polite" aria-atomic="false"></div>
    <div id="chatbot-input-area">
      <input id="chatbot-input" type="text" placeholder="Tanyakan apa saja..." aria-label="Masukkan pesan"/>
      <button id="chatbot-send-btn" aria-label="Kirim pesan">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <script>
    // Konteks Website & Prompt AI
    const konteksWebsite = `Kamu adalah asisten AI khusus untuk website bernama "AsrulCS" yang dibuat oleh Dafid  yang lahir pada tanggal 7Noevember2009, seorang pelajar di SMA Negeri 01 Kemangkon. Dafid berasal dari Purbalijgga dan sangat antusias di bidang teknologi sejak kecil.
sosmed:
wa: 6282138305820
ig: @Asrul_ae02
github: -
tiktok: @Asrul_ae02

Profil Asrul:
- Nama lengkap: Asrul Alfandi (panggilan online: Asrul)
- Tempat tinggal: Bekasi,Jawa Barat, Indonesia
- tanggal lahir: 21-2-2009
- Sekolah: SMA Negeri 1 Tarumajaya 
- Kelas saat ini: X-I
- Kontak yang tersedia di website: email, akun sosial media aktif di Instagram, Telegram
- Minat dan fokus utama: teknologi, pemrograman, robotika, pengembangan bot WhatsApp dan Telegram, website, serta tools berbasis Python
- Aktif di ekstrakurikuler robotika di sekolah, menguasai komponen seperti Arduino, ESP32, dan sensor ultrasonic serta sensor suhu
- Memiliki pengalaman mengembangkan proyek teknologi terintegrasi, seperti panel hosting menggunakan Pterodactyl
- Filosofi belajar: "Tetap lapar akan ilmu" dan percaya bahwa usaha tidak akan mengkhianati hasil
- Visi website: mendokumentasikan proses belajar Asrul, membagikan pengalaman, dan menginspirasi pelajar lain untuk berani berkarya di dunia teknologi baik hardware maupun software

Isi website "Asrul":
- Artikel, tutorial, dan dokumentasi seputar pemrograman front-end dan back-end
- Proyek bot WhatsApp, Telegram, dan berbagai tools automatisasi menggunakan Python dan JavaScript
- Pembahasan robotika yang meliputi komponen elektronik, sensor, dan penerapan praktisnya
- Tips belajar teknologi dan pengembangan diri untuk pelajar dan pemula
- Informasi tentang ekstrakurikuler robotika dan kompetisi yang diikuti
- Blog tentang pengalaman Asrul di dunia teknologi dan pemrograman

Tugas utama kamu adalah membantu pengunjung dengan jawaban yang informatif, ramah, dan mudah dipahami terutama tentang teknologi, pemrograman, robotika, dan topik yang ada di website tersebut. Gunakan bahasa Indonesia santai tapi sopan dan profesional, dengan paragraf pendek dan list bila perlu.

Namun, kamu tidak dibatasi hanya menjawab seputar website saja. Bila ada pertanyaan umum atau topik lain di luar itu, kamu tetap berusaha memberikan jawaban yang jelas dan bermanfaat dengan cara yang ramah dan sopan. Kamu tetap bertanggung jawab dan menjaga kualitas jawaban, tanpa menolak menjawab dengan kalimat pembatas yang kaku.

Tambahkan instruksi khusus untuk format jawaban:
- Gunakan paragraf pendek (maksimal 4-7 kalimat per paragraf)
- Gunakan list untuk poin-poin penting subjek
- Gunakan list angka 1,2,3 dan seterusnya jika penting sebagai objek(jika tidak penting tidak usah)
- Untuk kode program, gunakan blok kode dengan sintaks yang sesuai
- Batasi panjang setiap kalimat maksimal 20 kata
- Gunakan pemisah --- untuk bagian penting
- jika ada tanda bintang • ubah menjadi •
Contoh:
Pengunjung: "Siapa Asrul?"
Jawaban: "Asrul Alfandi adalah pelajar di SMA Negeri 1 Tarumajaya yang sangat antusias dengan teknologi dan robotika. Dia aktif mengembangkan bot WhatsApp, Telegram, dan proyek teknologi lainnya sambil berbagi ilmu melalui website ini."

Pengunjung: "Bagaimana cara membuat bot Telegram dengan Node.js?"
Jawaban: "Kamu bisa mulai dengan menggunakan library seperti Telegraf di Node.js, lalu buat bot dengan API Telegram. Pastikan kamu paham async programming dan penggunaan webhook atau polling..."

Pengunjung: "Apakah Asrul mengikuti kompetisi robotika?"
Jawaban: "Iya, Asrul aktif di ekstrakurikuler robotika di sekolah dan sedang belajar banyak tentang Arduino, ESP32, dan sensor-sensor untuk mengikuti berbagai kompetisi dan mengembangkan proyek nyata."

Jangan lupa, Asrul percaya bahwa belajar teknologi itu perjalanan yang menyenangkan dan setiap tantangan bisa diatasi dengan usaha dan rasa ingin tahu yang tinggi.
note jika ada jawaban yang berpoint angka urutin angka dari 1,2,3,4,5 dan seterusnya`;

    // Elemen DOM
    const toggleBtn = document.getElementById('chatbot-toggle');
    const container = document.getElementById('chatbot-container');
    const closeBtn = document.getElementById('chatbot-close-btn');
    const input = document.getElementById('chatbot-input');
    const sendBtn = document.getElementById('chatbot-send-btn');
    const output = document.getElementById('chatbot-output');
    const copySuccess = document.getElementById('copy-success');

    // Event Listener untuk Toggle Chatbot
    toggleBtn.addEventListener('click', () => {
      container.style.display = container.style.display === 'flex' ? 'none' : 'flex';
      if (container.style.display === 'flex') input.focus();
    });
    toggleBtn.addEventListener('keypress', e => {
      if (e.key === 'Enter' || e.key === ' ') toggleBtn.click();
    });

    closeBtn.addEventListener('click', () => {
      container.style.display = 'none';
    });

    // Fungsi untuk Membuat Pesan
    function buatPesan(who, text) {
      const wrapper = document.createElement('div');
      wrapper.classList.add('chat-message', who);
      
      const avatar = document.createElement('div');
      avatar.classList.add('chat-avatar');
      avatar.innerHTML = who === 'user' 
        ? '<i class="fas fa-user" aria-hidden="true"></i>' 
        : '<i class="fas fa-robot" aria-hidden="true"></i>';

      const chatText = document.createElement('div');
      chatText.classList.add('chat-text');
      
      if (who === 'bot') {
        chatText.innerHTML = formatPesan(text); // Format khusus untuk bot
      } else {
        chatText.textContent = text; // User tetap plain text
      }

      wrapper.appendChild(avatar);
      wrapper.appendChild(chatText);
      return wrapper;
    }

    // Fungsi untuk Membuat Loading Animation
    function buatLoading() {
      const wrapper = document.createElement('div');
      wrapper.classList.add('chat-message', 'bot');
      
      const avatar = document.createElement('div');
      avatar.classList.add('chat-avatar');
      avatar.innerHTML = '<i class="fas fa-robot" aria-hidden="true"></i>';

      const chatText = document.createElement('div');
      chatText.classList.add('chat-text');
      
      const typingIndicator = document.createElement('div');
      typingIndicator.classList.add('typing-indicator');
      typingIndicator.innerHTML = `
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      `;
      
      chatText.appendChild(typingIndicator);
      wrapper.appendChild(avatar);
      wrapper.appendChild(chatText);
      
      return wrapper;
    }

    // Fungsi Konversi Markdown ke HTML
    function formatPesan(text) {
      // Tangani blok kode dengan sintaks tertentu
      const formattedText = text.replace(/```(\w+)?\s*([\s\S]*?)```/g, (match, lang, code) => {
        const language = lang || '';
        return `<div class="code-container">
                  <div class="code-header">
                    <span>${language}</span>
                    <button class="copy-btn" data-code="${encodeURIComponent(code)}">
                      <i class="fas fa-copy"></i> Salin
                    </button>
                  </div>
                  <pre><code class="language-${language.toLowerCase()}">${escapeHtml(code)}</code></pre>
                </div>`;
      });
      const withBulletPoints = text.replace(/\•\s(.*?)(\n|$)/g, '<ul><li>$1</li></ul>');
      // Tangani list bernomor secara berurutan
      let listCounter = 1;
      const withNumberedLists = formattedText.replace(/(\d+)\.\s(.*?)(<br>|\n|$)/g, (match, num, content) => {
        return `<div class="numbered-item">
                  <div class="number">${listCounter++}.</div>
                  <div class="content">${content}</div>
                </div>`;
      });
      
      // Format teks biasa
      
      const finalText = withNumberedLists
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // teks tebal
        .replace(/\*(.*?)\*/g, '<em>$1</em>') // teks miring
        .replace(/`(.*?)`/g, '<code>$1</code>') // kode inline
        .replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>') // link
        .replace(/\n---\n/g, '<hr style="margin: 10px 0; border: 1px solid rgba(0,223,196,0.2);">') // pemisah
        .replace(/\n/g, '<br>'); // baris baru
      
      // Jika ada list bernomor, bungkus dalam container
      if (finalText.includes('numbered-item')) {
        return `<div class="chat-text-content">${finalText.replace(/<div class="numbered-item">/g, '<div class="numbered-list"><div class="numbered-item">')}</div>`;
      }
      
      return `<div class="chat-text-content">${finalText}</div>`;
    }

    // Fungsi untuk escape HTML
    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // Fungsi Kirim Pesan ke AI
    async function kirimPesan() {
      const pesan = input.value.trim();
      if (!pesan) return;

      // Tampilkan pesan user
      output.appendChild(buatPesan('user', pesan));
      output.scrollTop = output.scrollHeight;

      // Tampilkan loading AI
      const loadingMsg = buatLoading();
      output.appendChild(loadingMsg);
      output.scrollTop = output.scrollHeight;

      input.value = '';
      input.focus();

      try {
        const balasan = await panggilGemini(konteksWebsite + "\nUser: " + pesan + "\nAI:");
        
        // Ganti loading dengan respons diformat
        loadingMsg.querySelector('.chat-text').innerHTML = formatPesan(balasan.trim());
        output.scrollTop = output.scrollHeight;
        
        // Tambahkan event listener untuk tombol salin
        tambahkanListenerSalin();
      } catch (err) {
        loadingMsg.querySelector('.chat-text').textContent = 'Maaf, terjadi kesalahan saat memproses pesan.';
        console.error(err);
      }
    }

    // Event Listener untuk Kirim Pesan
    sendBtn.addEventListener('click', kirimPesan);
    input.addEventListener('keypress', e => {
      if (e.key === 'Enter') kirimPesan();
    });

    // Fungsi untuk menambahkan event listener pada tombol salin
    function tambahkanListenerSalin() {
      const tombolSalin = document.querySelectorAll('.copy-btn');
      tombolSalin.forEach(btn => {
        btn.addEventListener('click', () => {
          const code = decodeURIComponent(btn.getAttribute('data-code'));
          navigator.clipboard.writeText(code).then(() => {
            // Tampilkan feedback
            copySuccess.classList.add('show');
            setTimeout(() => {
              copySuccess.classList.remove('show');
            }, 2000);
          }).catch(err => {
            console.error('Gagal menyalin kode:', err);
          });
        });
      });
    }

    // Fungsi Panggil API Gemini
    async function panggilGemini(prompt) {
      const apiKey = "AIzaSyB-9P91L9_tpikll_qJo0tKUpdMuEsajSs";
      
      const response = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{ role: "user", parts: [{ text: prompt }] }],
            generationConfig: {
              maxOutputTokens: 500 // Batasi panjang respons
            }
          }),
        }
      );
      
      const data = await response.json();
      if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
        return data.candidates[0].content.parts[0].text;
      } else {
        console.error("API error:", data);
        return "Maaf, saya tidak bisa menjawab sekarang. Coba lagi nanti ya! 😊";
      }
    }
    
    // Inisialisasi chatbot dengan pesan selamat datang
    window.addEventListener('DOMContentLoaded', () => {
      const welcomeMsg = buatPesan('bot', `Hai! Selamat datang di website Portofolio Asrul! 🟧 Saya asisten AI khusus di sini, sahabat belajarnya Asrul. Ada yang bisa saya bantu hari ini?`);
      output.appendChild(welcomeMsg);
      output.scrollTop = output.scrollHeight;
    });
  </script>
</body>
</html>
